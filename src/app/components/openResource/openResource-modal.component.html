<button style="width: fit-content; background-color: white;" mat-icon-button class="close-button" [mat-dialog-close]="true">
  <mat-icon style="margin-bottom: 15px; color: black;" class="close-icon" color="warn">close</mat-icon>
</button>
<h1 mat-dialog-title class="h1">Recursos</h1>

<mat-dialog-content [formGroup]="form" class="mat-dialog-content">
    <mat-tab-group style="background: #0c1b22" mat-align-tabs="center">
        <mat-tab label="Observaciones">
            <br>
            <div *ngIf="!isLoading" class="obs">
                <div id="app-mensajes" class="scroll2" style="height: 300px;">
                    <div *ngFor="let comm of comments">
                        <div class="align photo">
                            <div class="container space1">
                                <div class="align3 user">
                                    <p>{{comm.user.displayName}}</p>
                                    <p>{{comm.createdAt | date: 'dd/MM/y HH:mm' }}</p>
                                </div>
                                <div class="msgTx">
                                    <img [src]="comm.user.photoURL" alt="" /> &nbsp;
                                    <p class="coment">{{comm.comment}}</p>
                                </div>
                            </div>
                        </div>
                        <br>
                    </div>

                </div>
                <br>
                <span *ngIf="resourceFormControl.comment.touched && resourceFormControl.comment.errors?.whitespace" style="color: red; font-size: 10px;">
                        No se admiten campos con espacios en blanco</span>
                <div class="align" (keyup.enter)="sendComment()">
                    <input style="background: white;" name="message" placeholder="Enviar comentario al Equipo" type="text" formControlName="comment" required />
                    <button class="btn btn-light" matTooltip="Enviar" (click)="sendComment()">
                        <mat-icon style="background: #0c1b22;">send</mat-icon>
                    </button>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Archivos">
            <div class="scroll" style="height: 700px;">
                <br>
                <div class="files align">
                    <input type="file" formControlName="file" id="file" style="color: white;" (change)="handleFileInput($event.target.files)" multiple>
                    <button (click)="onUpdateFiles()">
                        <mat-icon style="color: white;"  matTooltip="Subir archivo">check</mat-icon>
                    </button> &nbsp;
                    <button (click)="onClearFiles()">
                        <mat-icon style="color: white;"  matTooltip="Descartar archivo">close</mat-icon>
                    </button>
                </div>
                <div class="grid">
                    <div *ngFor="let res of resources; let i = index" class="archivo">
                        <mat-card class="mat-elevation-z4">
                            <div class="clear" style="margin: 0 auto;">
                                <button (click)="downloadFile(res.url)"><mat-icon style="color: white;"  matTooltip="Descargar">arrow_downward</mat-icon></button>
                            </div>

                            <mat-card-header>
                                <mat-card-title style="font-size: 14px;">Recurso {{i + 1}}</mat-card-title>
                            </mat-card-header>
                            <img *ngIf="
                  res.type == 'image/jpeg' ||
                  res.type == 'image/png' ||
                  res.type == 'image/gif' ||
                  res.type == 'image/bmp'
                " [src]="res.url" style="width: 100px; height: 100px;" alt="img" />
                            <img *ngIf="res.type == 'application/pdf'" style="width: 100px; height: 100px;" src="../../../assets/img/pdf.png" alt="pdf" />
                            <img *ngIf="
                  res.type ==
                    'application/vnd.openxmlformats-officedocument.wordprocessingml.document' ||
                  res.type == 'application/msword' ||
                  res.type == 'application/vnd.oasis.opendocument.text'
                " src="../../../assets/img/word.png" style="width: 100px; height: 100px;" alt="word" />
                            <img *ngIf="
                  res.type ==
                    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ||
                  res.type == 'application/vnd.ms-excel' ||
                  res.type == 'application/vnd.oasis.opendocument.spreadsheet'
                " src="../../../assets/img/excel.jpg" style="width: 100px; height: 100px;" alt="excel" />
                            <img *ngIf="res.type == 'text/plain'" src="../../../assets/img/txt.png" alt="" />
                            <img *ngIf="
                  res.type ==
                    'application/vnd.oasis.opendocument.presentation' ||
                  res.type ==
                    'application/vnd.openxmlformats-officedocument.presentationml.presentation' ||
                  res.type == 'application/vnd.ms-powerpoint'
                " src="../../../assets/img/pp.jpg" style="width: 100px; height: 100px;" alt="ppt" />

                            <mat-card-content>
                                <p class="coment2">{{res.fileName}}</p>
                                <div class="photo align">
                                    <img [src]="res.user.photoURL" alt="photURL" [matTooltip]="res.user.displayName" /> &nbsp;&nbsp;
                                    <p class="coment2">{{res.createdAt | date: 'dd/MM/y HH:mm' }}</p>
                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>
            </div>
        </mat-tab>


    </mat-tab-group>

</mat-dialog-content>